<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body class="base06-background">
    <div class="base05-background header row">
      <div class="column column-80">
        <h1>CI Toolbox</h1>
      </div>
      <div class="column social-icon">
        <a class="float-right" href="https://github.com/mstream/ci-toolkit">
          <span class="mdi mdi-github"/>
        </a>
      </div>
    </div>
    <section class="container">
      <div class="row">
        <div class="column column-80">
          <h2>pipeline</h2>
        </div>
        <div class="column social-icon">
          <a class="float-right" href="https://www.npmjs.com/package/@ci-toolkit/pipeline">
            <span class="mdi mdi-npm"/>
          </a>
        </div>
      </div>
      <h3>get-last</h3>
      <pre id="pipeline-get-last-terminal" class="terminal"></pre>
      <div id="pipeline-get-last-documentation"></div>
      <h3>mark-commit</h3>
      <pre id="pipeline-mark-commit-terminal" class="terminal"></pre>
      <div id="pipeline-mark-commit-documentation"></div>
    </section>
    <hr/>
    <section class="container">
      <div class="row">
        <div class="column column-80">
          <h2>version</h2>
        </div>
        <div class="column social-icon">
          <a class="float-right" href="https://www.npmjs.com/package/@ci-toolkit/version">
            <span class="mdi mdi-npm"/>
          </a>
        </div>
      </div>
      <h3>show</h3>
      <pre id="version-show-terminal" class="terminal"></pre>
      <div id="version-show-documentation"></div>
    </section>
    <script type="module">
      import {run} from "./terminal";
      import pipelineGetLastScript from "./scripts/pipeline/get-last.js";
      import pipelineGetLastDocsUrl from "../../../modules/pipeline/docs/get-last.md";
      import pipelineMarkCommitScript from "./scripts/pipeline/mark-commit.js";
      import pipelineMarkCommitDocsUrl from "../../../modules/pipeline/docs/mark-commit.md";
      import versionShowScript from "./scripts/version/show";
      import versionShowDocsUrl from "../../../modules/version/docs/show.md";
     
      function loadDocumentation({name, url}) {
        const containerId = `${name}-documentation`;
        fetch(url)
          .then(response => response.text())
          .then(data => document.getElementById(containerId).innerHTML = data)
      }

      function runTerminal({name,script}) {
        const containerId = `${name}-terminal`;
        run({
          containerId, 
          pauseInMs: 300,
          script,
        }); 
      }

      loadDocumentation({
        name: "pipeline-get-last", 
        url: pipelineGetLastDocsUrl,
      });
      
      loadDocumentation({
        name: "pipeline-mark-commit", 
        url: pipelineMarkCommitDocsUrl,
      });
      
      loadDocumentation({
        name: "version-show", 
        url: versionShowDocsUrl,
      });
      
      runTerminal({
        name: "pipeline-get-last", 
        script: pipelineGetLastScript,
      });
      
      runTerminal({
        name: "pipeline-mark-commit", 
        script: pipelineMarkCommitScript,
      });

      runTerminal({
        name: "version-show", 
        script: versionShowScript,
      });
    </script>
  </body>
</html>
